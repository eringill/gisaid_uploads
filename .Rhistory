library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs <- read.csv('data.csv', header = TRUE)
seqs <- subset(seqs, select=-c(proportion))
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
seqs_can <- seqs[seqs$region == 'Canada',]
names(seqs_can)[3] <- 'GISAID'
names(seqs_can)[2] <- 'Sequences'
names(seqs_can)[4] <- 'Date'
seqs_can <- data.frame(seqs_can)
seqs_can$Date <- as.Date(seqs_can$Date)
ggplot(seqs_can, aes(x = Date, y = Sequences, fill = 'Sequences')) +
geom_col() +
geom_col(aes(x = Date, y = GISAID, fill = 'GISAID')) +
ylab("Number of sequences") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
scale_y_continuous(labels = function(x) format(x, scientific = FALSE)) +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
seqs <- read.csv('data.csv', header = TRUE)
seqs <- subset(seqs, select=-c(proportion))
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by region and date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date.png", width = 25, height = 25, units = 'cm')
seqs <- read.csv('data_reduced.csv', header = TRUE)
seqs <- subset(seqs, select=-c(proportion))
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
seqs_can <- seqs[seqs$region == 'Canada',]
names(seqs_can)[3] <- 'GISAID'
names(seqs_can)[2] <- 'Sequences'
names(seqs_can)[4] <- 'Date'
seqs_can <- data.frame(seqs_can)
seqs_can$Date <- as.Date(seqs_can$Date)
ggplot(seqs_can, aes(x = Date, y = Sequences, fill = 'Sequences')) +
geom_col() +
geom_col(aes(x = Date, y = GISAID, fill = 'GISAID')) +
ylab("Number of sequences") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y") +
scale_y_continuous(labels = function(x) format(x, scientific = FALSE)) +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_seqs_running_canada.png", width = 25, height = 25, units = 'cm')
