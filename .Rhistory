install.packages('TSclust')
library('TSclust')
data('synthetic.tseries')
library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs <- read.csv('../data/days_to_deposition_90.csv', header = TRUE)
seqs$country <- factor(seqs$country)
seqs$country <- relevel(seqs$country, "Canada")
names(seqs)[2] <- 'Aug_2021'
names(seqs)[5] <- 'Nov_2021'
names(seqs)[6] <- 'Mar_2022'
seqs <- read.csv('data/days_to_deposition_90.csv', header = TRUE)
seqs$country <- factor(seqs$country)
seqs$country <- relevel(seqs$country, "Canada")
names(seqs)[2] <- 'Aug_2021'
names(seqs)[5] <- 'Nov_2021'
names(seqs)[6] <- 'Mar_2022'
seqsmelt <- melt(seqs)
View(seqsmelt)
View(seqs)
seqs <- subset(seqs, select = -c(perenct_cases_sequenced_and_shared, cases))
seqs <- subset(seqs, select = -c(percent_cases_sequenced_and_shared, cases))
seqsmelt <- melt(seqs)
View(seqsmelt)
names(seqsmelt)[2] <- 'Date'
names(seqsmelt)[3] <- 'Days to deposition'
names(seqsmelt)[2] <- 'date'
names(seqsmelt)[3] <- 'days_to_deposition'
ggplot(seqs, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = Aug_2021, label = Aug_2021), vjust = 1.5, colour = "black") +
geom_text(size=2.5, aes(y = Nov_2021, label = Nov_2021), vjust = 1.5, colour = "black") +
labs(fill='Month') +
scale_y_continuous(labels = function(x) format(x, scientific = FALSE))
ggplot(seqs, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = Aug_2021, label = Aug_2021), vjust = 1.5, colour = "black") +
geom_text(size=2.5, aes(y = Nov_2021, label = Nov_2021), vjust = 1.5, colour = "black") +
labs(fill='Month')
names(seqsmelt)[2] <- 'date'
names(seqsmelt)[3] <- 'days_to_deposition'
ggplot(seqs, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = Aug_2021, label = Aug_2021), vjust = 1.5, colour = "black") +
geom_text(size=2.5, aes(y = Nov_2021, label = Nov_2021), vjust = 1.5, colour = "black") +
labs(fill='Month')
ggplot(seqsmelt, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = Aug_2021, label = Aug_2021), vjust = 1.5, colour = "black") +
geom_text(size=2.5, aes(y = Nov_2021, label = Nov_2021), vjust = 1.5, colour = "black") +
labs(fill='Month')
ggplot(seqsmelt, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
labs(fill='Month')
ggplot(seqsmelt, aes(x = country, y = days_to_deposition, fill = date)) +
geom_bar(position ='dodge', stat = 'identity') +
ylab("Median number of days to deposition\nover 90 day period") +
xlab("Country") +
ggtitle("Median number of days from collection to deposition in GISAID by country over\nlast 90 days in Aug 2021, Nov 2021 and Mar 2022") +
guides(x = guide_axis(angle = 90)) +
labs(fill='Month') +
scale_fill_viridis(discrete = TRUE)
ggsave("plots/gisaid_seqs_by_country_90_days_mar_2022.png", width = 20, height = 20, units = 'cm')
