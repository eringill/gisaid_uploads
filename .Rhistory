library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs <- read.csv('data_reduced.csv', header = TRUE)
seqs <- subset(seqs, select=-c(proportion))
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
seqs_can <- seqs[seqs$region == 'Canada',]
names(seqs_can)[3] <- 'GISAID'
seqs_can <- data.frame(seqs_can)
seqs_can$date <- as.Date(seqs_can$date)
names(seqs_can)[2] <- 'séquences'
ggplot(seqs_can, aes(x = date, y = séquences, fill = 'séquences')) +
geom_col() +
geom_col(aes(x = date, y = GISAID, fill = 'GISAID')) +
ylab("nombre de séquences") +
ggtitle("nombre cumulatif de séquences conformes aux normes nationales de contrôle de la qualité et séquences \ntélechargées dans GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%m-%Y") +
scale_y_continuous(labels = function(x) format(x, scientific = FALSE)) +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_seqs_running_canada_fr.png", width = 25, height = 25, units = 'cm')
