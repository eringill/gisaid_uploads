library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
ggplot(seqs, aes(x = year_month, y = sampling_purpose, fill = 'province')) +
geom_linel() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, fill = 'province')) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, fill = 'province')) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
seqs$year_month <- as.Date(paste0(as.character(seqs$year_month), '01'), format='%Y%m%d')
ggplot(seqs, aes(x = year_month, y = sampling_purpose, fill = 'province')) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
View(seqs)
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- as.Date(paste0(as.character(seqs$year_month), '01'), format='%Y%m%d')
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- as.Date(paste0(as.character(seqs$year_month), '-01'), format='%Y%m%d')
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- as.Date(paste(seqs$year_month), '-01', sep=""))
seqs$year_month <- as.Date(paste(seqs$year_month), '-01', sep="")
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- as.Date(paste(seqs$year_month), '-01', sep="")
install.packages('anytime')
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- anydate(seqs$year_month)
library(anytime)
seqs <- read.csv('data/data_portal_proportions_month.csv', header = TRUE)
seqs$year_month <- anydate(seqs$year_month)
ggplot(seqs, aes(x = year_month, y = sampling_purpose, fill = 'province')) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province, fill = province)) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_x_date(date_breaks = "1 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line() +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Date") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID") +
guides(x = guide_axis(angle = 90)) +
geom_text(size=2.5, aes(y = sampling_purpose, label = sampling_purpose), vjust = 1.5, colour = "black") +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date")
ggtitle("Proportion of sequences by collection month and province in the\nVirusSeq data portal that have sampling purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences by collection month and province in the\nVirusSeq data portal that have sampling purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have sampling purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = age_bin, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have age bin information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = gender, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have gender information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sequencing_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have sequencing purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = Ct, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have Ct information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggplot(seqs, aes(x = year_month, y = sampling_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have sampling purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggsave("data_portal_sampling_purpose_month_prov.png", width = 20, height = 20, units = 'cm')
#age bin
ggplot(seqs, aes(x = year_month, y = age_bin, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have age bin information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggsave("data_portal_age_bin_month_prov.png", width = 20, height = 20, units = 'cm')
#gender
ggplot(seqs, aes(x = year_month, y = gender, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have gender information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggsave("data_portal_gender_month_prov.png", width = 20, height = 20, units = 'cm')
#sequencing purpose
ggplot(seqs, aes(x = year_month, y = sequencing_purpose, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have sequencing purpose information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggsave("data_portal_sequencing_purpose_month_prov.png", width = 20, height = 20, units = 'cm')
#Ct
ggplot(seqs, aes(x = year_month, y = Ct, group = province)) +
geom_line(aes(color=province)) +
ylab("Proportion") +
xlab("Collection date") +
ggtitle("Proportion of sequences in the VirusSeq data portal by collection month and province\nthat have Ct information") +
guides(x = guide_axis(angle = 90)) +
scale_x_date(date_breaks = "2 month", date_labels = "%b-%Y")
ggsave("data_portal_Ct_month_prov.png", width = 20, height = 20, units = 'cm')
