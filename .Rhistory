geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = '#457B9D')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40)
ggplot(seqs, aes(x = region, y = sequences)) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads)) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40)
ggplot(seqs, aes(x = region, y = sequences, fill = '#9ADADC')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = '#457B9D')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90))
ggplot(seqs, aes(x = region, y = sequences, legend = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, legend = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40)
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40)
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(label = GISAID_uploads, color = 'white'))
library(dplyr)
seqs <- seqs %>%
group_by(region) %>%
mutate(label_y = cumsum(GISAID_uploads))
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(label = label_y, label = GISAID_uploads),vjust = 1.5, colour = 'white')
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(label = label_y, label = GISAID_uploads),vjust = 1.5)
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(y = label_y, label = GISAID_uploads),vjust = 1.5)
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(y = label_y, label = label_y),vjust = 1.5)
View(df2)
View(seqs)
seqs2 <- seqs %>%
group_by(region) %>%
summarise(max = max(GISIAD_uploads, na.rm=TRUE))
seqs2 <- seqs %>%
group_by(region) %>%
summarise(max = max(GISAID_uploads, na.rm=TRUE))
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(y = seqs2$region, label = seqs2$max),vjust = 1.5)
ggplot(seqs, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID_uploads, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(label = seqs2$max),vjust = 1.5)
seqs2 <- seqs %>%
group_by(region) %>%
summarise(max = max(date, na.rm=TRUE))
seqs2 <- seqs %>%
group_by(region, sequences, GISAID_uploads) %>%
summarise(max = max(date, na.rm=TRUE))
seqs2 <- seqs %>%
group_by(region, GISAID_uploads) %>%
summarise(max = max(sequences, na.rm=TRUE))
seqs2 <- seqs %>%
group_by(region) %>%
summarise(max = max(sequences, GISAID_uploads,na.rm=TRUE))
seqs2 <- seqs %>%
group_by(region, GISAID_uploads) %>%
summarise(max = max(sequences,na.rm=TRUE))
seqs2<- seqs2 %>%
group_by(region, max) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE))
seqs2<- seqs2 %>%
group_by(region, max) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE), max = max(max))
seqs2<- seqs %>%
group_by(region) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE), max = max(sequences))
seqs2<- seqs %>%
group_by(region) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE), sequences = max(sequences))
seqs2<- seqs %>%
group_by(region) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE), sequences = max(sequences))
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(y = GISAID, label = GISAID), colour = "white")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_fill_hue(l=40) +
geom_text(aes(y = GISAID, label = GISAID), colour = "black")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), colour = "black")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
scale_y_continuous(trans='log10') +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black")
seqs2$region <- factor()
seqs2$region <- factor(seqs2$region)
seqs2$region <- relevel(seqs2$region, "Canada")
seqs2$region
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black")
library(viridis)
install.packages("viridis")
library(viridis)
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by province and month") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by province and month") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by province and date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date.png", width = 25, height = 25, units = 'cm')
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
ggplot(seqs2, aes(x = region, y = sequences)) +
geom_col() +
geom_col(aes(x = region, y = GISAID)) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
ggplot(seqs2, aes(x = region, y = sequences)) +
geom_col() +
geom_col(aes(x = region, y = GISAID)) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
ggplot(seqs2, aes(x = region, y = sequences)) +
geom_col() +
geom_col(aes(x = region, y = GISAID)) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
ggplot(seqs2, aes(x = region, y = sequences)) +
geom_col() +
geom_col(aes(x = region, y = GISAID)) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_prov_date.png", width = 25, height = 25, units = 'cm')
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "white") +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
scale_fill_manual(values = c("#9ADADC", "#457B9D")) +
scale_fill_discrete(name = "")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
scale_fill_discrete(name = "") +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national \nQC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
setwd("~/Projects/gisaid_uploads")
ggsave("gisaid_seqs_totals.png", width = 25, height = 25, units = 'cm')
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by province and date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date.png", width = 25, height = 25, units = 'cm')
library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs2 <- read.csv('data_fr.csv', header = TRUE)
seqs2 <- subset(seqs2, select=-c(proportion))
seqs3 <- read.csv('data_fr.csv', header = TRUE)
seqs3 <- subset(seqs3, select=-c(proportion))
seqs3$région <- factor(seqs3$region)
seqs3$région <- relevel(seqs3$région, "Canada")
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("numéro de séquences") +
ggtitle("nombre cumulé de séquences télechargé à GISAID per région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = région)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("numéro de séquences") +
ggtitle("nombre cumulé de séquences télechargé à GISAID per région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
seqs3$région <- relevel(seqs3$région, "Canada")
seqs3$région <- factor(seqs3$région)
seqs3$région <- relevel(seqs3$région, "Canada")
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = région)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("nombre de séquences") +
ggtitle("nombre cumulé de séquences télechargés à GISAID per région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date_fr.png", width = 25, height = 25, units = 'cm')
seqs4 <- seqs3 %>%
group_by(région, téléchargements_à_GISAID) %>%
summarise(max = max(séquences,na.rm=TRUE))
seqs4<- seqs3 %>%
group_by(région) %>%
summarise(GISAID = max(téléchargements_à_GISAID,na.rm=TRUE), séquences = max(séquences))
seqs4$region <- factor(seqs4$région)
seqs4$region <- relevel(seqs4$région, "Canada")
ggplot(seqs4, aes(x = région, y = séquences, fill = 'séquences')) +
geom_col() +
geom_col(aes(x = région, y = GISAID, fill = 'GISAID')) +
ylab("numéro de séquences") +
ggtitle("nombre cumulé de séquences qui passent les normes nationales cq et séquences télechargés à GISAID per région") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggplot(seqs4, aes(x = région, y = séquences, fill = 'séquences')) +
geom_col() +
geom_col(aes(x = région, y = GISAID, fill = 'GISAID')) +
ylab("nombre de séquences") +
ggtitle("nombre cumulé de séquences qui passent les normes nationales cq et séquences \ntélechargés à GISAID per région") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_seqs_totals_fr.png", width = 25, height = 25, units = 'cm')
library(ggplot2)
library(ggridges)
library(reshape)
library(dplyr)
library(viridis)
setwd("~/Projects/gisaid_uploads")
seqs <- read.csv('data.csv', header = TRUE)
seqs <- subset(seqs, select=-c(proportion))
seqs$region <- factor(seqs$region)
seqs$region <- relevel(seqs$region, "Canada")
ggplot(seqs, aes(x = date, y = GISAID_uploads)) +
geom_col(show.legend = FALSE, aes(fill = region)) +
facet_wrap(~region, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences uploaded to GISAID by region and date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date.png", width = 25, height = 25, units = 'cm')
seqs2 <- seqs %>%
group_by(region, GISAID_uploads) %>%
summarise(max = max(sequences,na.rm=TRUE))
seqs2<- seqs %>%
group_by(region) %>%
summarise(GISAID = max(GISAID_uploads,na.rm=TRUE), sequences = max(sequences))
seqs2$region <- factor(seqs2$region)
seqs2$region <- relevel(seqs2$region, "Canada")
ggplot(seqs2, aes(x = region, y = sequences, fill = 'sequences')) +
geom_col() +
geom_col(aes(x = region, y = GISAID, fill = 'GISAID')) +
ylab("number of sequences") +
ggtitle("Cumulative number of sequences passing national QC standards and sequences uploaded to GISAID \nby region") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_seqs_totals.png", width = 25, height = 25, units = 'cm')
#-----------French graphs
seqs3 <- read.csv('data_fr.csv', header = TRUE)
seqs3 <- subset(seqs3, select=-c(proportion))
seqs3$région <- factor(seqs3$région)
seqs3$région <- relevel(seqs3$région, "Canada")
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = région)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("nombre de séquences") +
ggtitle("nombre cumulatif de séquences téleverseés dans GISAID par région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE)
ggsave("gisaid_prov_date_fr.png", width = 25, height = 25, units = 'cm')
seqs4 <- seqs3 %>%
group_by(région, téléchargements_à_GISAID) %>%
summarise(max = max(séquences,na.rm=TRUE))
seqs4<- seqs3 %>%
group_by(région) %>%
summarise(GISAID = max(téléchargements_à_GISAID,na.rm=TRUE), séquences = max(séquences))
seqs4$region <- factor(seqs4$région)
seqs4$region <- relevel(seqs4$région, "Canada")
ggplot(seqs4, aes(x = région, y = séquences, fill = 'séquences')) +
geom_col() +
geom_col(aes(x = région, y = GISAID, fill = 'GISAID')) +
ylab("nombre de séquences") +
ggtitle("nombre cumulatif de séquences conformes aux normes nationales de contrôle de la qualité et séquences \ntéleversées dans GISAID par région") +
guides(x = guide_axis(angle = 90)) +
geom_text(aes(y = GISAID, label = GISAID), vjust = 1.5, colour = "black") +
labs(fill='') +
scale_fill_manual(values = c("#9ADADC", "#457B9D"))
ggsave("gisaid_seqs_totals_fr.png", width = 25, height = 25, units = 'cm')
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = région)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("nombre de séquences") +
ggtitle("nombre cumulatif de séquences téleverseés dans GISAID par région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE) +
scale_y_continuous(formatter="comma2")
comma2 <- function(x, ...) {
format(x, decimal.mark = ",", trim = TRUE, scientific = FALSE, ...)
}
ggplot(seqs3, aes(x = date, y = téléchargements_à_GISAID)) +
geom_col(show.legend = FALSE, aes(fill = région)) +
facet_wrap(~région, ncol = 1, scales = "free_y") +
guides(x = guide_axis(angle = 90)) +
xlab("date") +
ylab("nombre de séquences") +
ggtitle("nombre cumulatif de séquences téleverseés dans GISAID par région et date") +
scale_color_viridis(discrete = TRUE, option = "D")+
scale_fill_viridis(discrete = TRUE) +
scale_y_continuous(formatter="comma2")
